!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(window,function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=document.querySelector(".m-search-bar__input"),this.btn=document.querySelector(".m-search-bar__btn"),this.onPlaceChange=t}return o(e,[{key:"initSearch",value:function(){var e=this;this.autocomplete=new google.maps.places.Autocomplete(this.input,{componentRestrictions:{country:"se"}}),this.autocomplete.addListener("place_changed",function(){e.onPlaceChange(e.autocomplete.getPlace()),e.input.value=""}),this.btn.onclick=function(){e.input.value&&e.input.value.length>0&&(e.onPlaceChange({name:e.input.value}),e.input.value="")}}},{key:"updateBounds",value:function(e){this.autocomplete.setBounds(e)}}],[{key:"getHTML",value:function(e){return'<div class="m-search-bar"><label for="search" class="u-visually-hidden">Sök</label><input class="m-search-bar__input" id="search" placeholder="'+(e.placeholder?e.placeholder:"")+'" type="text" /><button class="m-search-bar__btn" title="sök">'+(e.searchIcon?'<img src="'+e.searchIcon+'" class="m-search-bar__icon" alt="sök">':"")+"</button></div>"}}]),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SELECTOR_CLASS=t.isMobile=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=l(r(3)),i=l(r(9)),s=l(r(1)),a=l(r(11));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);t.tag,t.places;var o=t.sidebar,l=t.popup,u=t.loadingScreen,p=t.imagePath,h=t.clusterer;this.options=t;var f=document.querySelector("."+c);f&&(this.mapHandler=new n.default(p,l?this.selectPlace.bind(this):null,h),o&&(this.sidebarHandler=new i.default(o,p,f),o.searchBar&&(this.mapSearch=new s.default(this.goToSearchedPlace.bind(this)))),l&&(this.mapPopup=new a.default(l,f,function(){return r.mapHandler.deselectPlace()})),u&&(this.loadScreen=document.querySelector(".o-loading-screen")),this.loadGoogleApis(function(){return google.maps.event.addDomListener(window,"load",init)}))}return o(e,[{key:"doneLoaded",value:function(){var e=this;setTimeout(function(){e.loadScreen&&e.loadScreen.classList.add("o-loading-screen--hidden")},500)}},{key:"loadGoogleApis",value:function(e){var t=this;"undefined"!=typeof google&&e();var r=document.createElement("script");r.src=this.options.tag;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o),r.addEventListener("load",function(){t.mapHandler.initMap(t.options.mapStyle),t.mapHandler.setPlaces(t.options.places,p()?0:300,0),t.mapHandler.getLocation(),t.mapSearch&&t.mapSearch.initSearch(),t.addListeners(),t.doneLoaded()})}},{key:"addListeners",value:function(){var e=this,t=!0;this.mapHandler.map.addListener("bounds_changed",function(){t&&(e.sidebarHandler&&e.sidebarHandler.populateSidebar(e.mapHandler.getVisibleMarkers(),e.selectPlace.bind(e),e.mapHandler.clientPosition),t=!1,setTimeout(function(){return t=!0},100))}),this.mapHandler.map.addListener("drag",function(){e.mapPopup&&t&&e.popupClose()}),this.mapHandler.map.addListener("zoom_changed",function(){e.mapPopup&&t&&e.popupClose()})}},{key:"goToSearchedPlace",value:function(t){var r=this;this.mapHandler.goToSearchedPlace(t).then(function(t){var o=r.mapHandler.markers.filter(function(r){return e.addressesEqual(t.formatted_address,r.item.address)&&e.namesEqual(t.name,r.item.name)})[0];o?r.selectPlace(o):t.types.includes("point_of_interest")?r.mapPopup.createAndShowPromptPopup(t):(r.popupClose(),r.sidebarHandler.setNumberVisibleMarkers(r.mapHandler.getVisibleMarkers(),!0))})}},{key:"selectPlace",value:function(e){var t=this.mapPopup.createPlacePopup(e.item),r=parseFloat(window.getComputedStyle(t).height.split("px")[0]);this.mapHandler.selectPlace(e,this.isMobile()||!this.sidebarHandler?0:this.options.sidebar.width,r/2+60),this.mapPopup.showPopup()}},{key:"popupClose",value:function(){this.mapPopup.closePopup(),this.mapHandler.deselectPlace()}},{key:"isMobile",value:function(){var e=this.options.sidebar;return e?!!e.mobileBreakpoint&&document.body.clientWidth<e.mobileBreakpoint:p()}}],[{key:"addressesEqual",value:function(e,t){return e&&t&&e.toLowerCase().trim().replace(/,/g,"").replace(/ /g,"").startsWith(t.toLowerCase().trim().replace(/,/g,"").replace(/ /g,""))}},{key:"namesEqual",value:function(e,t){return e&&t&&e.toLowerCase().trim().replace(/ /g,"")===t.toLowerCase().trim().replace(/ /g,"")}},{key:"formatClassName",value:function(e){return"."===e.charAt(0)?e:"."+e}}]),e}(),p=function(){return document.body.clientWidth<960};t.isMobile=p;var c=t.SELECTOR_CLASS="places";t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=s(r(4));r(5);var i=s(r(6));function s(e){return e&&e.__esModule?e:{default:e}}r(7).polyfill();var a=function(){function e(t,r,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mapWrapper=document.querySelector(t),this.markers=[],this.onMarkerClick=o,this.imagePath=r,this.clusterer=n}return o(e,[{key:"initMap",value:function(e){var t=this,r={zoom:14,center:new google.maps.LatLng("57.7004286","11.9543521"),styles:i.default[e]?i.default[e]:e,disableDefaultUI:!0};this.map=new google.maps.Map(this.mapWrapper,r),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var r={lat:e.coords.latitude,lng:e.coords.longitude};t.clientPosition=r,t.map.setCenter(r),console.log("Location found.")},function(e){console.log("Error with geolocation: ",e)}):console.log("No geoloc enabled.")}},{key:"goToCoordinates",value:function(e,t,r,o,n){var i=n||Math.max(16,this.map.zoom);r=r||0,o=o||0;var s=this.map.getProjection(),a=new google.maps.LatLng(parseFloat(e),parseFloat(t)),l=s.fromLatLngToPoint(a),u=new google.maps.Point(r/Math.pow(2,i),o/Math.pow(2,i));this.map.setCenter(s.fromPointToLatLng(new google.maps.Point(l.x-u.x,l.y+u.y))),this.map.setZoom(i)}},{key:"goToSearchedPlace",value:function(e){var t=this;return new Promise(function(r,o){e.geometry?(t.goToCoordinates(e.geometry.location.lat(),e.geometry.location.lng()),setTimeout(function(){return r(e)},50)):(new google.maps.places.AutocompleteService).getPlacePredictions({input:e.name,offset:e.name.length,componentRestrictions:{country:"se"},bounds:t.map.getBounds()},function(e,o){e&&e.length>0&&new google.maps.places.PlacesService(t.map).getDetails({reference:e[0].reference},function(e,o){e&&t.goToSearchedPlace(e).then(function(e){r(e)})})})})}},{key:"getLocation",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var r={lat:t.coords.latitude,lng:t.coords.longitude};e.map.setCenter(r),e.map.setZoom(16)}):alert("sorry your browser does not support Geolocation")}},{key:"selectPlace",value:function(e,t,r){return this.deselectPlace(),this.goToCoordinates(e.item.lat,e.item.lng,t,r),e.setMap(null),this.selectedMarker=new google.maps.Marker({position:new google.maps.LatLng(e.item.lat,e.item.lng),map:this.map,item:e.item,icon:{url:""+this.imagePath+(e.item.type?e.item.type:"")+".png",scaledSize:new google.maps.Size(51.2,64)},zIndex:100}),this.selectedMarker}},{key:"deselectPlace",value:function(){var e=this,t=this.selectedMarker;t&&(this.selectedMarker.setMap(null),t=new google.maps.Marker({position:new google.maps.LatLng(t.item.lat,t.item.lng),map:this.map,item:t.item,icon:{url:""+this.imagePath+(t.item.type?t.item.type:"")+".png",scaledSize:new google.maps.Size(32,40)},zIndex:0}),this.selectedMarker=null,this.onMarkerClick&&t.addListener("click",function(){return e.onMarkerClick(t)}))}},{key:"setPlaces",value:function(e,t,r){var o=this;this.markers=[],e.forEach(function(e){var t=e.lat,r=e.lng,n=e.type,i=new google.maps.Marker({position:new google.maps.LatLng(t,r),map:o.map,item:e,icon:{url:""+o.imagePath+(n||"")+".png",scaledSize:new google.maps.Size(32,40)}});o.onMarkerClick&&i.addListener("click",function(){return o.onMarkerClick(i)}),o.markers.push(i)}),this.clusterer&&google.maps.event.addListener(new n.default(this.map,this.markers,{styles:[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(Array(5).keys())).map(function(e){return o.getStyle(e+1)}),averageCenter:!0,gridSize:28,maxZoom:18,zoomOnClick:!1}),"clusterclick",function(e){var n=e.getCenter(),i=n.lat,s=n.lng,a=Math.min(o.map.zoom+3,e.getMarkerClusterer().getMaxZoom()+1);o.goToCoordinates(i(),s(),t,r,a)})}},{key:"getVisibleMarkers",value:function(){var e=this;return this.markers.filter(function(t){return e.inViewPort(e.map.getBounds(),t.item)})}},{key:"inViewPort",value:function(e,t){var r=t.lng,o=t.lat;if(r<e.j.l&&r>e.j.j&&o<e.l.l&&o>e.l.j)return!0}},{key:"getStyle",value:function(e){var t=this.clusterer,r=t.imagePath,o=t.textSize,n=t.textColor,i=t.sizes;return{textSize:o||16,textColor:n||"#252C25",width:(i=i||[10,10,10,10,10])[e-1],height:i[e-1],anchor:[0,0],iconAnchor:[0,0],url:""+r+e+".png"}}}]),e}();t.default=a},function(e,t,r){(function(t){function r(e,t,o){this.extend(r,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var n=o||{};this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.imagePath_=n.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=n.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,null!=n.averageCenter&&(this.averageCenter_=n.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var i=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=i.map_.getZoom();i.prevZoom_!=e&&(i.prevZoom_=e,i.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){i.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function o(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new n(this,e.getStyles(),e.getGridSize())}function n(e,t,r){e.getMarkerClusterer().extend(n,google.maps.OverlayView),this.styles_=t,this.padding_=r||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}r.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",r.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",r.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},r.prototype.onAdd=function(){this.setReady_(!0)},r.prototype.draw=function(){},r.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},r.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),r=new google.maps.LatLngBounds,o=0;e=t[o];o++)r.extend(e.getPosition());this.map_.fitBounds(r)},r.prototype.setStyles=function(e){this.styles_=e},r.prototype.getStyles=function(){return this.styles_},r.prototype.isZoomOnClick=function(){return this.zoomOnClick_},r.prototype.isAverageCenter=function(){return this.averageCenter_},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getTotalMarkers=function(){return this.markers_.length},r.prototype.setMaxZoom=function(e){this.maxZoom_=e},r.prototype.getMaxZoom=function(){return this.maxZoom_},r.prototype.calculator_=function(e,t){for(var r=0,o=e.length,n=o;0!==n;)n=parseInt(n/10,10),r++;return{text:o,index:r=Math.min(r,t)}},r.prototype.setCalculator=function(e){this.calculator_=e},r.prototype.getCalculator=function(){return this.calculator_},r.prototype.addMarkers=function(e,t){for(var r,o=0;r=e[o];o++)this.pushMarkerTo_(r);t||this.redraw()},r.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},r.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},r.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var r,o=0;r=this.markers_[o];o++)if(r==e){t=o;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},r.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!(t||!r)&&(this.resetViewport(),this.redraw(),!0)},r.prototype.removeMarkers=function(e,t){for(var r,o=!1,n=0;r=e[n];n++){var i=this.removeMarker_(r);o=o||i}if(!t&&o)return this.resetViewport(),this.redraw(),!0},r.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},r.prototype.getTotalClusters=function(){return this.clusters_.length},r.prototype.getMap=function(){return this.map_},r.prototype.setMap=function(e){this.map_=e},r.prototype.getGridSize=function(){return this.gridSize_},r.prototype.setGridSize=function(e){this.gridSize_=e},r.prototype.getMinClusterSize=function(){return this.minClusterSize_},r.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},r.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),o=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),n=t.fromLatLngToDivPixel(r);n.x+=this.gridSize_,n.y-=this.gridSize_;var i=t.fromLatLngToDivPixel(o);i.x-=this.gridSize_,i.y+=this.gridSize_;var s=t.fromDivPixelToLatLng(n),a=t.fromDivPixelToLatLng(i);return e.extend(s),e.extend(a),e},r.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},r.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},r.prototype.resetViewport=function(e){for(var t,r=0;t=this.clusters_[r];r++)t.remove();var o;for(r=0;o=this.markers_[r];r++)o.isAdded=!1,e&&o.setMap(null);this.clusters_=[]},r.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,r=0;t=e[r];r++)t.remove()},0)},r.prototype.redraw=function(){this.createClusters_()},r.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var r=(t.lat()-e.lat())*Math.PI/180,o=(t.lng()-e.lng())*Math.PI/180,n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))},r.prototype.addToClosestCluster_=function(e){for(var t,r=4e4,n=null,i=(e.getPosition(),0);t=this.clusters_[i];i++){var s=t.getCenter();if(s){var a=this.distanceBetweenPoints_(s,e.getPosition());a<r&&(r=a,n=t)}}n&&n.isMarkerInClusterBounds(e)?n.addMarker(e):((t=new o(this)).addMarker(e),this.clusters_.push(t))},r.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(t),o=0;e=this.markers_[o];o++)!e.isAdded&&this.isMarkerInBounds_(e,r)&&this.addToClosestCluster_(e)},o.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,r=0;t=this.markers_[r];r++)if(t==e)return!0;return!1},o.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,r=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,o=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(r,o),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var n=this.markers_.length;if(n<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),n==this.minClusterSize_)for(var i=0;i<n;i++)this.markers_[i].setMap(null);return n>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},o.prototype.getMarkerClusterer=function(){return this.markerClusterer_},o.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),o=0;e=r[o];o++)t.extend(e.getPosition());return t},o.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},o.prototype.getSize=function(){return this.markers_.length},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getCenter=function(){return this.center_},o.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},o.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},o.prototype.getMap=function(){return this.map_},o.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var r,o=0;r=this.markers_[o];o++)r.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var n=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},n.prototype.triggerClusterClick=function(){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},n.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var t=this;google.maps.event.addDomListener(this.div_,"click",function(){t.triggerClusterClick()})},n.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10),t},n.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},n.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},n.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},n.prototype.remove=function(){this.setMap(null)},n.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},n.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},n.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition},n.prototype.setCenter=function(e){this.center_=e},n.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var o=this.textColor_?this.textColor_:"black",n=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+o+"; position:absolute; font-size:"+n+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},t.MarkerClusterer=r,r.prototype.addMarker=r.prototype.addMarker,r.prototype.addMarkers=r.prototype.addMarkers,r.prototype.clearMarkers=r.prototype.clearMarkers,r.prototype.fitMapToMarkers=r.prototype.fitMapToMarkers,r.prototype.getCalculator=r.prototype.getCalculator,r.prototype.getGridSize=r.prototype.getGridSize,r.prototype.getExtendedBounds=r.prototype.getExtendedBounds,r.prototype.getMap=r.prototype.getMap,r.prototype.getMarkers=r.prototype.getMarkers,r.prototype.getMaxZoom=r.prototype.getMaxZoom,r.prototype.getStyles=r.prototype.getStyles,r.prototype.getTotalClusters=r.prototype.getTotalClusters,r.prototype.getTotalMarkers=r.prototype.getTotalMarkers,r.prototype.redraw=r.prototype.redraw,r.prototype.removeMarker=r.prototype.removeMarker,r.prototype.removeMarkers=r.prototype.removeMarkers,r.prototype.resetViewport=r.prototype.resetViewport,r.prototype.repaint=r.prototype.repaint,r.prototype.setCalculator=r.prototype.setCalculator,r.prototype.setGridSize=r.prototype.setGridSize,r.prototype.setMaxZoom=r.prototype.setMaxZoom,r.prototype.onAdd=r.prototype.onAdd,r.prototype.draw=r.prototype.draw,o.prototype.getCenter=o.prototype.getCenter,o.prototype.getSize=o.prototype.getSize,o.prototype.getMarkers=o.prototype.getMarkers,n.prototype.onAdd=n.prototype.onAdd,n.prototype.draw=n.prototype.draw,n.prototype.onRemove=n.prototype.onRemove,e.exports=r}).call(this,r(0))},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return u}),r.d(t,"Request",function(){return m}),r.d(t,"Response",function(){return _}),r.d(t,"DOMException",function(){return b}),r.d(t,"fetch",function(){return w});var o={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(o.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function c(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function h(e){var t=new FileReader,r=c(t);return t.readAsArrayBuffer(e),r}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o.arrayBuffer&&o.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e,t,r,o=p(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=c(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),o=0;o<t.length;o++)r[o]=String.fromCharCode(t[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=s(e),t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[s(e)]},u.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},u.prototype.set=function(e,t){this.map[s(e)]=a(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),l(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),l(e)},o.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r,o,n=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),y.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},d.call(m.prototype),d.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];_.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})};var b=self.DOMException;try{new b}catch(e){(b=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),b.prototype.constructor=b}function w(e,t){return new Promise(function(r,n){var i=new m(e,t);if(i.signal&&i.signal.aborted)return n(new b("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var e,t,o={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();t.append(o,n)}}),t)};o.url="responseURL"in s?s.responseURL:o.headers.get("X-Request-URL");var n="response"in s?s.response:s.responseText;r(new _(n,o))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.onabort=function(){n(new b("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&o.blob&&(s.responseType="blob"),i.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),i.signal&&(i.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",a)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=u,self.Request=m,self.Response=_)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={default:[],minimalistic:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"on"},{saturation:"-58"},{hue:"#00ff1c"},{lightness:"0"},{gamma:"0.83"}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"},{saturation:"-33"}]},{featureType:"poi.business",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"all",stylers:[{visibility:"on"},{saturation:"-48"},{lightness:"29"}]},{featureType:"poi.school",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.sports_complex",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway.controlled_access",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"all",stylers:[{visibility:"off"},{saturation:"1"},{color:"#ee3945"},{weight:"1.33"},{lightness:"30"},{gamma:"1.84"}]},{featureType:"water",elementType:"all",stylers:[{color:"#61b7da"},{visibility:"on"},{saturation:"-40"},{lightness:"31"}]}],wmyl:[{featureType:"water",elementType:"geometry",stylers:[{color:"#552744"},{lightness:0}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#f7f7f7"},{lightness:20}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]}},function(e,t,r){(function(t,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var o;o=function(){"use strict";function e(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,s=void 0,a=function(e,t){d[n]=e,d[n+1]=t,2===(n+=2)&&(s?s(y):b())},l="undefined"!=typeof window?window:void 0,u=l||{},p=u.MutationObserver||u.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(y,1)}}var d=new Array(1e3);function y(){for(var e=0;e<n;e+=2){(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0}n=0}var m,g,_,v,b=void 0;function w(e,t){var r=this,o=new this.constructor(M);void 0===o[T]&&q(o);var n=r._state;if(n){var i=arguments[n-1];a(function(){return H(n,o,i,r._result)})}else j(r,o,e,t);return o}function k(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(M);return E(t,e),t}c?b=function(){return t.nextTick(y)}:p?(g=0,_=new p(y),v=document.createTextNode(""),_.observe(v,{characterData:!0}),b=function(){v.data=g=++g%2}):h?((m=new MessageChannel).port1.onmessage=y,b=function(){return m.port2.postMessage(0)}):b=void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(y)}:f()}catch(e){return f()}}():f();var T=Math.random().toString(36).substring(2);function M(){}var P=void 0,S=1,C=2,x={error:null};function L(e){try{return e.then}catch(e){return x.error=e,x}}function A(t,r,o){r.constructor===t.constructor&&o===w&&r.constructor.resolve===k?function(e,t){t._state===S?O(e,t._result):t._state===C?z(e,t._result):j(t,void 0,function(t){return E(e,t)},function(t){return z(e,t)})}(t,r):o===x?(z(t,x.error),x.error=null):void 0===o?O(t,r):e(o)?function(e,t,r){a(function(e){var o=!1,n=function(e,t,r,o){try{e.call(t,r,o)}catch(e){return e}}(r,t,function(r){o||(o=!0,t!==r?E(e,r):O(e,r))},function(t){o||(o=!0,z(e,t))},e._label);!o&&n&&(o=!0,z(e,n))},e)}(t,r,o):O(t,r)}function E(e,t){var r,o;e===t?z(e,new TypeError("You cannot resolve a promise with itself")):(o=typeof(r=t),null===r||"object"!==o&&"function"!==o?O(e,t):A(e,t,L(t)))}function B(e){e._onerror&&e._onerror(e._result),I(e)}function O(e,t){e._state===P&&(e._result=t,e._state=S,0!==e._subscribers.length&&a(I,e))}function z(e,t){e._state===P&&(e._state=C,e._result=t,a(B,e))}function j(e,t,r,o){var n=e._subscribers,i=n.length;e._onerror=null,n[i]=t,n[i+S]=r,n[i+C]=o,0===i&&e._state&&a(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var o=void 0,n=void 0,i=e._result,s=0;s<t.length;s+=3)o=t[s],n=t[s+r],o?H(r,o,n,i):n(i);e._subscribers.length=0}}function H(t,r,o,n){var i=e(o),s=void 0,a=void 0,l=void 0,u=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return x.error=e,x}}(o,n))===x?(u=!0,a=s.error,s.error=null):l=!0,r===s)return void z(r,new TypeError("A promises callback cannot return that same promise."))}else s=n,l=!0;r._state!==P||(i&&l?E(r,s):u?z(r,a):t===S?O(r,s):t===C&&z(r,s))}var R=0;function q(e){e[T]=R++,e._state=void 0,e._result=void 0,e._subscribers=[]}var D=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(M),this.promise[T]||q(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&O(this.promise,this._result))):z(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===P&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,o=r.resolve;if(o===k){var n=L(e);if(n===w&&e._state!==P)this._settledAt(e._state,t,e._result);else if("function"!=typeof n)this._remaining--,this._result[t]=e;else if(r===U){var i=new r(M);A(i,e,n),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},e.prototype._settledAt=function(e,t,r){var o=this.promise;o._state===P&&(this._remaining--,e===C?z(o,r):this._result[t]=r),0===this._remaining&&O(o,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;j(e,void 0,function(e){return r._settledAt(S,t,e)},function(e){return r._settledAt(C,t,e)})},e}(),U=function(){function t(e){this[T]=R++,this._result=this._state=void 0,this._subscribers=[],M!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){E(e,t)},function(t){z(e,t)})}catch(t){z(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this.constructor;return e(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return U.prototype.then=w,U.all=function(e){return new D(this,e).promise},U.race=function(e){var t=this;return o(e)?new t(function(r,o){for(var n=e.length,i=0;i<n;i++)t.resolve(e[i]).then(r,o)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},U.resolve=k,U.reject=function(e){var t=new this(M);return z(t,e),t},U._setScheduler=function(e){s=e},U._setAsap=function(e){a=e},U._asap=a,U.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var o=null;try{o=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===o&&!t.cast)return}e.Promise=U},U.Promise=U,U},e.exports=o()}).call(this,r(8),r(0))},function(e,t){var r,o,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var l,u=[],p=!1,c=-1;function h(){p&&l&&(p=!1,l.length?u=l.concat(u):c=-1,u.length&&f())}function f(){if(!p){var e=a(h);p=!0;for(var t=u.length;t;){for(l=u,u=[];++c<t;)l&&l[c].run();c=-1,t=u.length}l=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||p||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=y,n.addListener=y,n.once=y,n.off=y,n.removeListener=y,n.removeAllListeners=y,n.emit=y,n.prependListener=y,n.prependOnceListener=y,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=s(r(1)),i=s(r(10));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imagePath=r,this.sidebarOptions=t,this.buildSidebar(t,o),this.resultWrapper=document.querySelector(".m-sidebar__results"),this.buttonBarResult=document.querySelector(".m-mobile-buttons-bar__result"),this.sidebarNumberPlaces=document.querySelector(".m-sidebar__number-places"),this.resultWrapper&&(this.resultWrapperHTML=this.resultWrapper.innerHTML),t.mobileBreakpoint&&new i.default}return o(e,[{key:"buildSidebar",value:function(e,t){var r=e.width,o=e.mobileBreakpoint,i=e.searchBar,s='<div class="m-sidebar">';i&&(s+='<div class="m-sidebar__search">'+n.default.getHTML(i)+"</div>"),o&&(s+=this.getMobileBarHTML({width:r,mobileBreakpoint:o,searchBar:i})),s+='<div class="m-sidebar__wrapper"><div class="m-sidebar__results"></div><span class="m-sidebar__number-places">0 platser</span></div></div>',t.insertAdjacentHTML("beforeend",s)}},{key:"getMobileBarHTML",value:function(e){return'<div class="m-mobile-buttons-bar"><span class="m-mobile-buttons-bar__result">0 platser</span><button class="m-mobile-buttons-bar__btn m-mobile-buttons-bar__btn--search">'+(e.searchBar.searchIcon?'<img src="'+e.searchBar.searchIcon+'" class="m-search-bar__icon" alt="sök">':"")+'</button><button class="m-mobile-buttons-bar__btn m-mobile-buttons-bar__btn--toggle"><img src="'+e.mobileListToggle+'" class="m-mobile-buttons-bar__icon m-mobile-buttons-bar__icon--toggle"></button></div>'}},{key:"populateSidebar",value:function(e,t,r){var o=this,n=this.resultWrapper,i=this.resultWrapperHTML;n&&(n.innerHTML=i,this.sortMarkers(e,r).forEach(function(e){var r=e.item,i=r.name,s=r.type,a=(r.address,r.long,r.lat,r.link,r.phone,r.comment,document.createElement("BUTTON"));a.classList.add("m-sidebar-item"),a.onclick=function(){return t(e)},a.innerHTML='<span class="m-sidebar-item__name">'+i+'</span><img class="m-sidebar-item__logo " src="'+o.imagePath+(e.item.type?e.item.type:"")+'.png" alt="'+s+'"/>',n.appendChild(a)}),this.setNumberVisibleMarkers(e))}},{key:"setNumberVisibleMarkers",value:function(e,t){var r=e.length+" plats"+(1!==e.length?"er":"")+(t?" i närheten":"");this.sidebarOptions.mobileBreakpoint?this.buttonBarResult.innerHTML=r:this.sidebarNumberPlaces.innerHTML=r}},{key:"sortMarkers",value:function(t,r){return r?t.sort(function(t,o){return e.getDistance(r,{lat:parseFloat(t.item.lat),lng:parseFloat(t.item.lng)})<e.getDistance(r,{lat:parseFloat(o.item.lat),lng:parseFloat(o.item.lng)})}):t.sort(function(e,t){return e.item.name<t.item.name?-1:1})}}],[{key:"getDistance",value:function(e,t){var r=t.lat-e.lat,o=t.lng-t.lng;return Math.sqrt(Math.pow(2,r)+Math.pow(2,o))}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=document.querySelector(".m-mobile-buttons-bar__btn--search"),r=document.querySelector(".m-mobile-buttons-bar__btn--toggle"),o=document.querySelector(".m-mobile-buttons-bar__icon--toggle"),n=document.querySelector(".m-sidebar__search"),i=document.querySelector(".m-sidebar");t&&n&&(t.onclick=function(){return n.classList.toggle("m-sidebar__search--show")}),i&&r&&(r.onclick=function(){o.classList.toggle("m-mobile-buttons-bar__icon--up"),i.classList.toggle("m-sidebar--hidden")})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();var n=function(){function e(t,r,o){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sidebar=document.querySelector(".m-sidebar"),this.popupOptions=t,this.buttonBarIcon=document.querySelector(".m-mobile-buttons-bar__icon--toggle"),this.buildPopup(r),this.popup=document.querySelector(".m-popup"),this.popupContainer=this.popup.querySelector(".m-popup__container"),this.popupClose=this.popup.querySelector(".m-popup__close"),this.popupClose.addEventListener("click",function(){return n.closePopup(o)})}return o(e,[{key:"closePopup",value:function(e){this.popup.classList.add("m-popup--close"),e&&e()}},{key:"buildPopup",value:function(e){e.insertAdjacentHTML("beforeend",'<div class="m-popup m-popup--close"><button class="m-popup__close">x</button><div class="m-popup__container"></div></div>')}},{key:"showPopup",value:function(){this.popup.classList.contains("m-popup--close")&&(this.popup.classList.remove("m-popup--close"),this.sidebar&&this.sidebar.classList.add("m-sidebar--hidden"),this.buttonBarIcon&&this.buttonBarIcon.classList.add("m-mobile-buttons-bar__icon--up"))}},{key:"createPlacePopup",value:function(e){var t=(e.name?"<h2 class='m-popup__title'>"+e.name+"</h2>":"")+(e.address?"<p class='m-popup__address'>"+e.address+"</p>":"")+(e.comment?"<p>"+e.comment+"</p>":"")+"<div class='m-popup__contact'>"+(e.phone?"<a href='tel:"+e.phone+"'>"+e.phone+"</a>":"")+(e.link?"<a href='"+this.addHTTP(e.link)+"' target='_blank' rel='noreferrer nofollow'>Webbplats</a>":"")+"</div>";return this.popupContainer.innerHTML=t,this.popupContainer}},{key:"createAndShowPromptPopup",value:function(e){var t=this.popupOptions,r=t.link,o=t.textLink,n=t.noResultHTML,i="";n?i="<div>"+n+"</div>":i="<div>"+(e.name?"<h2 class='m-popup__title'>Tyvärr!</h2>":"")+('<p>Vi hittar tyvärr inte några resultat på <i>"'+e.name+'"</i>.</p>')+(r&&o?'<p><a href="'+r+'">'+o+"</a></p>":"")+"</div>";return this.popupContainer.innerHTML=i,this.showPopup(),this.popupContainer}},{key:"addHTTP",value:function(e){return"w"===e.charAt(0)?"http://"+e:e}}]),e}();t.default=n}])});